@page
@model InstitucionesEducativas.IndexModel
@{
ViewData["Title"] = "Instituciones Educativas";
}

<div class="container mt-4">

    <!-- Tarjeta para el encabezado y botón "Nueva Institución" -->
    <div class="card shadow-sm mb-3">
        <div class="card-body d-flex justify-content-between align-items-center">
            <h5 class="mb-0 text-primary">Mantenimiento de Instituciones Educativas</h5>
            <a asp-page="Create" class="btn btn-primary btn-md">Nueva</a>
        </div>
    </div>

    <!-- Tarjeta para la tabla -->
    <div class="card shadow-sm">
        <div class="card-header bg-white text-dark">
            <h6 class="mb-0">Información</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped" id="dataTable">
                    <thead class="table-primary">
                    <tr>
                        <th>ID Institución</th>
                        <th>Nombre</th>
                        <th class="text-center">Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var item in Model.Instituciones)
                    {
                    <tr>
                        <td>@item.IdInstitucion</td>
                        <td>@item.Nombre</td>
                        <td class="text-center">
                            <a asp-page="Edit" asp-route-id="@item.IdInstitucion" class="btn btn-sm btn-primary">Editar</a>
                            <button class="btn btn-sm btn-danger" onclick="confirmDelete(@item.IdInstitucion)">Eliminar</button>
                        </td>
                    </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div>

      
    </div>
</div>

@section Scripts {
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function confirmDelete(id) {
        Swal.fire({
            title: 'Confirmar Eliminación',
            text: "¿Realmente desea eliminar el elemento seleccionado?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si',
            cancelButtonText: 'No'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = '/InstitucionesEducativas/Delete?id=' + id;
            }
        })
    }

    // Inicializar la tabla con paginación
    document.addEventListener("DOMContentLoaded", function() {
        const dataTable = new simpleDatatables.DataTable("#dataTable");
    });
</script>

@if (TempData["Error"] != null)
{
<script>
    Swal.fire('Error', '@TempData["Error"]', 'error');
</script>
}
}
